{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\upl.patforme\\\\frontend\\\\src\\\\pages\\\\StudentDashboard.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"../components/ui/card\";\nimport { Button } from \"../components/ui/button\";\nimport { Badge } from \"../components/ui/badge\";\nimport { Progress } from \"../components/ui/progress\";\nimport { LogOut, Clock, BookOpen } from \"lucide-react\";\nimport { useToast } from \"../hooks/use-toast\";\nimport { useExam } from '../contexts/ExamContext';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StudentDashboard = ({\n  user,\n  onLogout\n}) => {\n  _s();\n  const {\n    faculty\n  } = useParams();\n  const {\n    toast\n  } = useToast();\n\n  // Utilisation du contexte Exam\n  const {\n    exams,\n    setExams,\n    activeExam,\n    setActiveExam,\n    examStarted,\n    setExamStarted\n  } = useExam();\n  const [results, setResults] = useState([]);\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [answers, setAnswers] = useState({});\n  const [timeLeft, setTimeLeft] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const timerRef = useRef(null);\n  useEffect(() => {\n    if (!user || !user.faculty) {\n      setError(\"Utilisateur ou facult√© non renseign√©.\");\n      return;\n    }\n    const fetchData = async () => {\n      console.log(\"üì© Requ√™te re√ßue pour faculty :\", user.faculty);\n      try {\n        setLoading(true);\n        setError(null);\n        const examsResponse = await fetch(`http://localhost:3001/api/exams?faculty=${user.faculty}`, {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        if (!examsResponse.ok) throw new Error('Failed to fetch exams');\n        const examsData = await examsResponse.json();\n        console.log(\"donner recue du backend\");\n        console.error(\"Erreur lors du chargement des examens:\", error);\n        const resultsResponse = await fetch('http://localhost:3001/api/results', {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        if (!resultsResponse.ok) throw new Error('Failed to fetch results');\n        const resultsData = await resultsResponse.json();\n        const now = new Date();\n        const filteredExams = examsData.filter(exam => exam.faculty === user.faculty).map(exam => {\n          const start = new Date(exam.startTime);\n          const end = new Date(exam.endTime);\n          let status = 'upcoming';\n          if (now > end) status = 'completed';else if (now >= start) status = 'active';\n          return {\n            ...exam,\n            status\n          };\n        });\n        setExams(filteredExams);\n        setResults(resultsData);\n      } catch (err) {\n        setError(\"Erreur lors du chargement des donn√©es\");\n        toast({\n          title: \"Erreur\",\n          description: \"Impossible de charger les examens\",\n          variant: \"destructive\"\n        });\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [user, user === null || user === void 0 ? void 0 : user.faculty]);\n  useEffect(() => {\n    if (!activeExam || !examStarted || timeLeft <= 0) return;\n    timerRef.current = setInterval(() => {\n      setTimeLeft(prev => {\n        if (prev <= 1) {\n          handleSubmitExam();\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    };\n  }, [activeExam, examStarted, timeLeft]);\n  const startExam = exam => {\n    console.log(\" startExam appeler avec :\", exam);\n    if (!exam) return;\n    const now = new Date();\n    const startTime = new Date(exam.startTime);\n    const endTime = new Date(exam.endTime);\n    if (now < startTime) {\n      console.log(\"examen pas encors commencer \");\n      toast({\n        title: \"Examen non disponible\",\n        description: `L'examen commence le ${startTime.toLocaleString()}`,\n        variant: \"destructive\"\n      });\n      return;\n    }\n    if (now > endTime) {\n      console.log(\"examen deja terminer\");\n      toast({\n        title: \"Examen termin√©\",\n        description: \"Le temps imparti est √©coul√©\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    if (!exam.questions || !Array.isArray(exam.questions) || exam.questions.length === 0) {\n      console.log(\"pas des question \");\n      toast({\n        title: \"Examen invalide\",\n        description: \"Aucune question trouv√©e pour cet examen.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    setActiveExam(exam);\n    setTimeLeft(Math.floor((endTime.getTime() - now.getTime()) / 1000));\n    setCurrentQuestion(0);\n    setAnswers({});\n    setExamStarted(true);\n    setTimeout(() => {\n      console.log(\"verifiecation apres 500ms\");\n      console.log(\"activeExam=\", exam);\n      console.log(\"examStarted =\", true);\n    }, 500);\n  };\n  const selectAnswer = (questionId, answerIndex) => {\n    if (!examStarted) return;\n    setAnswers(prev => ({\n      ...prev,\n      [questionId]: answerIndex\n    }));\n  };\n  const navigateQuestion = direction => {\n    if (!activeExam) return;\n    if (direction === 'prev' && currentQuestion > 0) {\n      setCurrentQuestion(prev => prev - 1);\n    } else if (direction === 'next' && currentQuestion < activeExam.questions.length - 1) {\n      setCurrentQuestion(prev => prev + 1);\n    }\n  };\n  const handleSubmitExam = async () => {\n    if (!activeExam || !Array.isArray(activeExam.questions)) return;\n    const score = activeExam.questions.reduce((acc, question) => {\n      return acc + (answers[question.id] === question.correctAnswer ? 1 : 0);\n    }, 0);\n    const percentage = Math.round(score / activeExam.questions.length * 100);\n    const newResult = {\n      examId: activeExam.id,\n      score: percentage,\n      studentName: (user === null || user === void 0 ? void 0 : user.name) || \"\",\n      totalQuestions: activeExam.questions.length,\n      submittedAt: new Date().toISOString(),\n      studentId: user === null || user === void 0 ? void 0 : user.id,\n      // souvent n√©cessaire\n      answers: answers\n    };\n    console.log(\"üîç Donn√©es envoy√©es au backend :\", newResult);\n    try {\n      const response = await fetch('http://localhost:3001/api/exams/submit-exam', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify({\n          examId: activeExam.id,\n          answers: answers || {},\n          studentId: user === null || user === void 0 ? void 0 : user.id,\n          studentName: user === null || user === void 0 ? void 0 : user.name,\n          faculty: user === null || user === void 0 ? void 0 : user.faculty,\n          totalQuestions: activeExam.questions.length,\n          // üî• <-- AJOUT ICI \n          submittedAt: new Date().toISOString(),\n          completedAt: new Date().toISOString()\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        console.error('Erreur backend:', errorData);\n        throw new Error(errorData.message || 'Failed to submit exam');\n      }\n      setResults(prev => [...prev, newResult]);\n      toast({\n        title: \"Examen termin√©\",\n        description: `Votre score: ${percentage}%`\n      });\n    } catch (err) {\n      toast({\n        title: \"Erreur\",\n        description: \"√âchec de l'enregistrement des r√©sultats\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setActiveExam(null);\n      setExamStarted(false);\n    }\n  };\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"error-message\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 293,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-container\",\n    children: examStarted && activeExam ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"exam-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"exam-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: activeExam.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Question \", currentQuestion + 1, \"/\", activeExam.questions.length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `timer ${timeLeft < 300 ? 'warning' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(Clock, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: formatTime(timeLeft)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Progress, {\n        value: (currentQuestion + 1) / activeExam.questions.length * 100,\n        className: \"progress-bar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"question-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: activeExam.questions[currentQuestion].question\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"options-grid\",\n          children: activeExam.questions[currentQuestion].options.map((option, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `option ${answers[activeExam.questions[currentQuestion].id] === index ? 'selected' : ''}`,\n            onClick: () => selectAnswer(activeExam.questions[currentQuestion].id, index),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"option-indicator\",\n              children: answers[activeExam.questions[currentQuestion].id] === index && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"indicator-dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 85\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: option\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navigation-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => navigateQuestion('prev'),\n          disabled: currentQuestion === 0,\n          variant: \"outline\",\n          children: \"Pr\\xE9c\\xE9dent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }, this), currentQuestion === activeExam.questions.length - 1 ? /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleSubmitExam,\n          className: \"submit-btn\",\n          children: \"Terminer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => navigateQuestion('next'),\n          children: \"Suivant\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"dashboard-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Tableau de Bord \\xC9tudiant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"Bienvenue \", user ? user.name : \"√âtudiant\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Facult\\xE9 : \", user === null || user === void 0 ? void 0 : user.faculty]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: onLogout,\n          variant: \"outline\",\n          children: [/*#__PURE__*/_jsxDEV(LogOut, {\n            size: 16,\n            className: \"mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 15\n          }, this), \"D\\xE9connexion\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"exams-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Examens Disponibles\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Chargement des examens...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 15\n        }, this) : exams.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Aucun examen disponible\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"exams-grid\",\n          children: exams.map(exam => /*#__PURE__*/_jsxDEV(Card, {\n            className: \"exam-card\",\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n                children: [/*#__PURE__*/_jsxDEV(BookOpen, {\n                  size: 16,\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 25\n                }, this), exam.title]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n                children: exam.subject\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                className: `status-${exam.status}`,\n                children: exam.status === 'active' ? 'Actif' : exam.status === 'upcoming' ? '√Ä venir' : 'Termin√©'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Dur\\xE9e:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 26\n                }, this), \" \", exam.duration, \" min\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"D\\xE9but:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 26\n                }, this), \" \", new Date(exam.startTime).toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Fin:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 26\n                }, this), \" \", new Date(exam.endTime).toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 23\n              }, this), exam.status === 'active' && /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => startExam(exam),\n                className: \"start-exam-btn\",\n                children: \"Commencer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 23\n            }, this)]\n          }, exam.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"results-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Mes R\\xE9sultats\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 13\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Chargement des r\\xE9sultats...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 15\n        }, this) : results.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Aucun r\\xE9sultat disponible\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"results-list\",\n          children: results.map((result, index) => {\n            const exam = exams.find(e => e.id === result.examId);\n            return /*#__PURE__*/_jsxDEV(Card, {\n              className: \"result-card\",\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"result-header\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: (exam === null || exam === void 0 ? void 0 : exam.title) || `Examen #${result.examId}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 415,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `score ${result.score >= 60 ? 'pass' : 'fail'}`,\n                    children: [result.score, \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 416,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 414,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"result-details\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [Math.round(result.score * result.totalQuestions / 100), \"/\", result.totalQuestions, \" bonnes r\\xE9ponses\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 421,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"date\",\n                    children: result.submittedAt ? new Date(result.submittedAt).toLocaleString('fr-FR', {\n                      dateStyle: 'short',\n                      timeStyle: 'short'\n                    }) : \"Date non disponible\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 422,\n                    columnNumber: 26\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 420,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 23\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 296,\n    columnNumber: 5\n  }, this);\n};\n_s(StudentDashboard, \"w7qffvtijUI3bTwYWIX9OtA+D+I=\", false, function () {\n  return [useParams, useToast, useExam];\n});\n_c = StudentDashboard;\nexport default StudentDashboard;\nvar _c;\n$RefreshReg$(_c, \"StudentDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","Card","CardContent","CardDescription","CardHeader","CardTitle","Button","Badge","Progress","LogOut","Clock","BookOpen","useToast","useExam","jsxDEV","_jsxDEV","Fragment","_Fragment","StudentDashboard","user","onLogout","_s","faculty","toast","exams","setExams","activeExam","setActiveExam","examStarted","setExamStarted","results","setResults","currentQuestion","setCurrentQuestion","answers","setAnswers","timeLeft","setTimeLeft","loading","setLoading","error","setError","timerRef","fetchData","console","log","examsResponse","fetch","headers","localStorage","getItem","ok","Error","examsData","json","resultsResponse","resultsData","now","Date","filteredExams","filter","exam","map","start","startTime","end","endTime","status","err","title","description","variant","current","setInterval","prev","handleSubmitExam","clearInterval","startExam","toLocaleString","questions","Array","isArray","length","Math","floor","getTime","setTimeout","selectAnswer","questionId","answerIndex","navigateQuestion","direction","score","reduce","acc","question","id","correctAnswer","percentage","round","newResult","examId","studentName","name","totalQuestions","submittedAt","toISOString","studentId","response","method","body","JSON","stringify","completedAt","errorData","message","formatTime","seconds","mins","secs","toString","padStart","className","children","fileName","_jsxFileName","lineNumber","columnNumber","size","value","options","option","index","onClick","disabled","subject","duration","result","find","e","dateStyle","timeStyle","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/upl.patforme/frontend/src/pages/StudentDashboard.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams } from \"react-router-dom\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"../components/ui/card\";\r\nimport { Button } from \"../components/ui/button\";\r\nimport { Badge } from \"../components/ui/badge\";\r\nimport { Progress } from \"../components/ui/progress\";\r\nimport { LogOut, Clock, CheckCircle, BookOpen } from \"lucide-react\";\r\nimport { useToast } from \"../hooks/use-toast\";\r\nimport { useExam } from '../contexts/ExamContext';\r\ninterface Exam {\r\n  id: string;\r\n  title: string;\r\n  subject: string;\r\n  duration: number;\r\n  startTime: string;\r\n  endTime: string;\r\n  questions: Question[];\r\n  status: 'upcoming' | 'active' | 'completed';\r\n}\r\n\r\ninterface Question {\r\n  id: string;\r\n  question: string;\r\n  options: string[];\r\n  correctAnswer: number;\r\n}\r\n\r\ninterface User {\r\n  id: string;\r\n  username: string;\r\n  role: string;\r\n  name: string;\r\n  faculty: string;\r\n}\r\n\r\ninterface ExamResult {\r\n  examId: string;\r\n  score: number;\r\n  totalQuestions: number;\r\n  completedAt?: string;\r\n    submittedAt: string;\r\n}\r\n\r\ninterface StudentDashboardProps {\r\n  user: User | null;\r\n  onLogout: () => void;\r\n}\r\n\r\nconst StudentDashboard: React.FC<StudentDashboardProps> = ({ user, onLogout }) => {\r\n  const { faculty } = useParams();\r\n  const { toast } = useToast();\r\n\r\n  // Utilisation du contexte Exam\r\n  const {\r\n    exams,\r\n    setExams,\r\n    activeExam,\r\n    setActiveExam,\r\n    examStarted,\r\n    setExamStarted\r\n  } = useExam();\r\n\r\n  const [results, setResults] = useState<ExamResult[]>([]);\r\n  const [currentQuestion, setCurrentQuestion] = useState(0);\r\n  const [answers, setAnswers] = useState<{ [key: string]: number }>({});\r\n  const [timeLeft, setTimeLeft] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n\r\n  useEffect(() => {\r\n    if (!user || !user.faculty) {\r\n  setError(\"Utilisateur ou facult√© non renseign√©.\");\r\n  return;\r\n}\r\n  \r\n  const fetchData = async () => {\r\n      console.log(\"üì© Requ√™te re√ßue pour faculty :\", user.faculty );\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        const examsResponse = await fetch(`http://localhost:3001/api/exams?faculty=${user.faculty}`, {\r\n          \r\n\r\n          headers: {\r\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n        if (!examsResponse.ok) throw new Error('Failed to fetch exams');\r\n        const examsData = await examsResponse.json();\r\n        console.log (\"donner recue du backend\")\r\n        console.error(\"Erreur lors du chargement des examens:\", error);\r\n\r\n        const resultsResponse = await fetch('http://localhost:3001/api/results', {\r\n          headers: {\r\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n        if (!resultsResponse.ok) throw new Error('Failed to fetch results');\r\n        const resultsData = await resultsResponse.json();\r\n\r\n        const now = new Date();\r\n        const filteredExams = examsData\r\n          .filter((exam: any) => exam.faculty === user.faculty)\r\n          .map((exam: any) => {\r\n            const start = new Date(exam.startTime);\r\n            const end = new Date(exam.endTime);\r\n            let status: 'upcoming' | 'active' | 'completed' = 'upcoming';\r\n            if (now > end) status = 'completed';\r\n            else if (now >= start) status = 'active';\r\n            return { ...exam, status };\r\n          });\r\n\r\n        setExams(filteredExams);\r\n        setResults(resultsData);\r\n      } catch (err) {\r\n        setError(\"Erreur lors du chargement des donn√©es\");\r\n        toast({\r\n          title: \"Erreur\",\r\n          description: \"Impossible de charger les examens\",\r\n          variant: \"destructive\",\r\n        });\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [user, user?.faculty]);\r\n\r\n  useEffect(() => {\r\n    if (!activeExam || !examStarted || timeLeft <= 0) return;\r\n\r\n    timerRef.current = setInterval(() => {\r\n      setTimeLeft(prev => {\r\n        if (prev <= 1) {\r\n          handleSubmitExam();\r\n          return 0;\r\n        }\r\n        return prev - 1;\r\n      });\r\n    }, 1000);\r\n\r\n    return () => {\r\n      if (timerRef.current) {\r\n        clearInterval(timerRef.current);\r\n      }\r\n    };\r\n  }, [activeExam, examStarted, timeLeft]);\r\n\r\n  const startExam = (exam: typeof activeExam) => {\r\n    console.log (\" startExam appeler avec :\",exam)\r\n    if (!exam) return;\r\n\r\n    const now = new Date();\r\n    const startTime = new Date(exam.startTime);\r\n    const endTime = new Date(exam.endTime);\r\n\r\n    if (now < startTime) {\r\n      console.log (\"examen pas encors commencer \");\r\n      toast({\r\n        title: \"Examen non disponible\",\r\n        description: `L'examen commence le ${startTime.toLocaleString()}`,\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (now > endTime) {\r\n      console. log(\"examen deja terminer\");\r\n      toast({\r\n        title: \"Examen termin√©\",\r\n        description: \"Le temps imparti est √©coul√©\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!exam.questions || !Array.isArray(exam.questions) || exam.questions.length === 0) {\r\n      console.log(\"pas des question \")\r\n      toast({\r\n        title: \"Examen invalide\",\r\n        description: \"Aucune question trouv√©e pour cet examen.\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    setActiveExam(exam);\r\n    setTimeLeft(Math.floor((endTime.getTime() - now.getTime()) / 1000));\r\n    setCurrentQuestion(0);\r\n    setAnswers({});\r\n    setExamStarted(true);\r\n    setTimeout(()  => {\r\n      console.log (\"verifiecation apres 500ms\");\r\n      console.log(\"activeExam=\",exam);\r\n      console.log(\"examStarted =\",true);\r\n    },500)\r\n  };\r\n\r\n  const selectAnswer = (questionId: string, answerIndex: number) => {\r\n    if (!examStarted) return;\r\n    setAnswers(prev => ({ ...prev, [questionId]: answerIndex }));\r\n  };\r\n\r\n  const navigateQuestion = (direction: 'prev' | 'next') => {\r\n    if (!activeExam) return;\r\n    if (direction === 'prev' && currentQuestion > 0) {\r\n      setCurrentQuestion(prev => prev - 1);\r\n    } else if (direction === 'next' && currentQuestion < activeExam.questions.length - 1) {\r\n      setCurrentQuestion(prev => prev + 1);\r\n    }\r\n  };\r\n\r\n  const handleSubmitExam = async () => {\r\n    if (!activeExam || !Array.isArray(activeExam.questions)) return;\r\n\r\n    const score = activeExam.questions.reduce((acc, question) => {\r\n      return acc + (answers[question.id] === question.correctAnswer ? 1 : 0);\r\n    }, 0);\r\n\r\n    const percentage = Math.round((score / activeExam.questions.length) * 100);\r\n    const newResult = {\r\n      examId: activeExam.id,\r\n      score: percentage,\r\n    studentName: user?.name || \"\",\r\n      totalQuestions: activeExam.questions.length,\r\n      submittedAt: new Date().toISOString(),\r\n        studentId: user?.id,           // souvent n√©cessaire\r\n    answers: answers\r\n    };\r\n    console.log(\"üîç Donn√©es envoy√©es au backend :\", newResult);\r\n    \r\n    \r\n\r\n    try {\r\n      const response = await fetch('http://localhost:3001/api/exams/submit-exam', {\r\n        \r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n        body: JSON.stringify({\r\n          examId: activeExam.id,\r\n          answers: answers || {},\r\n           studentId: user?.id,\r\n           studentName: user?.name, \r\n           faculty: user?.faculty,\r\n          totalQuestions: activeExam.questions.length,             // üî• <-- AJOUT ICI \r\n          submittedAt: new Date().toISOString(),\r\n          completedAt: new Date().toISOString()\r\n        })\r\n      });\r\n      if (!response.ok) {\r\n  const errorData = await response.json();\r\n  console.error('Erreur backend:', errorData);\r\n  throw new Error(errorData.message || 'Failed to submit exam');\r\n}\r\n\r\n\r\n      setResults(prev => [...prev, newResult]);\r\n      toast({\r\n        title: \"Examen termin√©\",\r\n        description: `Votre score: ${percentage}%`,\r\n      });\r\n    } catch (err) {\r\n      toast({\r\n        title: \"Erreur\",\r\n        description: \"√âchec de l'enregistrement des r√©sultats\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setActiveExam(null);\r\n      setExamStarted(false);\r\n    }\r\n  };\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  if (error) return <div className=\"error-message\">{error}</div>;\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      {examStarted && activeExam ? (\r\n        <div className=\"exam-container\">\r\n          <header className=\"exam-header\">\r\n            <div>\r\n              <h1>{activeExam.title}</h1>\r\n              <p>Question {currentQuestion + 1}/{activeExam.questions.length}</p>\r\n            </div>\r\n            <div className={`timer ${timeLeft < 300 ? 'warning' : ''}`}>\r\n              <Clock size={18} />\r\n              <span>{formatTime(timeLeft)}</span>\r\n            </div>\r\n          </header>\r\n\r\n          <Progress value={((currentQuestion + 1) / activeExam.questions.length) * 100} className=\"progress-bar\" />\r\n\r\n          <div className=\"question-card\">\r\n            <h2>{activeExam.questions[currentQuestion].question}</h2>\r\n            <div className=\"options-grid\">\r\n              {activeExam.questions[currentQuestion].options.map((option, index) => (\r\n                <div\r\n                  key={index}\r\n                  className={`option ${answers[activeExam.questions[currentQuestion].id] === index ? 'selected' : ''}`}\r\n                  onClick={() => selectAnswer(activeExam.questions[currentQuestion].id, index)}\r\n                >\r\n                  <div className=\"option-indicator\">\r\n                    {answers[activeExam.questions[currentQuestion].id] === index && <div className=\"indicator-dot\" />}\r\n                  </div>\r\n                  <span>{option}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"navigation-buttons\">\r\n            <Button\r\n              onClick={() => navigateQuestion('prev')}\r\n              disabled={currentQuestion === 0}\r\n              variant=\"outline\"\r\n            >\r\n              Pr√©c√©dent\r\n            </Button>\r\n            {currentQuestion === activeExam.questions.length - 1 ? (\r\n              <Button onClick={handleSubmitExam} className=\"submit-btn\">\r\n                Terminer\r\n              </Button>\r\n            ) : (\r\n              <Button onClick={() => navigateQuestion('next')}>\r\n                Suivant\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <header className=\"dashboard-header\">\r\n            <div>\r\n              <h1>Tableau de Bord √âtudiant</h1>\r\n              <h2>Bienvenue {user ? user.name : \"√âtudiant\"}</h2>\r\n              <p>Facult√© : {user?.faculty}</p>\r\n            </div>\r\n            <Button onClick={onLogout} variant=\"outline\">\r\n              <LogOut size={16} className=\"mr-2\" />\r\n              D√©connexion\r\n            </Button>\r\n          </header>\r\n\r\n          <section className=\"exams-section\">\r\n            <h2>Examens Disponibles</h2>\r\n            {loading ? (\r\n              <p>Chargement des examens...</p>\r\n            ) : exams.length === 0 ? (\r\n              <p>Aucun examen disponible</p>\r\n            ) : (\r\n              <div className=\"exams-grid\">\r\n                {exams.map((exam) => (\r\n                  <Card key={exam.id} className=\"exam-card\">\r\n                    <CardHeader>\r\n                      <CardTitle>\r\n                        <BookOpen size={16} className=\"mr-2\" />\r\n                        {exam.title}\r\n                      </CardTitle>\r\n                      <CardDescription>{exam.subject}</CardDescription>\r\n                      <Badge className={`status-${exam.status}`}>\r\n                        {exam.status === 'active' ? 'Actif' :\r\n                         exam.status === 'upcoming' ? '√Ä venir' : 'Termin√©'}\r\n                      </Badge>\r\n                    </CardHeader>\r\n                    \r\n                      <CardContent>\r\n                      <p><strong>Dur√©e:</strong> {exam.duration} min</p>\r\n                      <p><strong>D√©but:</strong> {new Date(exam.startTime).toLocaleString()}</p>\r\n                      <p><strong>Fin:</strong> {new Date(exam.endTime).toLocaleString()}</p>\r\n                      {exam.status === 'active' && (\r\n                        <Button onClick={() => startExam(exam)} className=\"start-exam-btn\">\r\n                          Commencer\r\n                        </Button>\r\n                      )}\r\n                    </CardContent>\r\n                  </Card>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </section>\r\n\r\n          <section className=\"results-section\">\r\n            <h2>Mes R√©sultats</h2>\r\n            {loading ? (\r\n              <p>Chargement des r√©sultats...</p>\r\n            ) : results.length === 0 ? (\r\n              <p>Aucun r√©sultat disponible</p>\r\n            ) : (\r\n              <div className=\"results-list\">\r\n                {results.map((result, index) => {\r\n                  const exam = exams.find(e => e.id === result.examId);\r\n                  return (\r\n                    <Card key={index} className=\"result-card\">\r\n                      <CardContent>\r\n                        <div className=\"result-header\">\r\n                          <h3>{exam?.title || `Examen #${result.examId}`}</h3>\r\n                          <div className={`score ${result.score >= 60 ? 'pass' : 'fail'}`}>\r\n                            {result.score}%\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"result-details\">\r\n                          <p>{Math.round((result.score * result.totalQuestions) / 100)}/{result.totalQuestions} bonnes r√©ponses</p>\r\n                         <p className=\"date\">\r\n         {result.submittedAt\r\n        ? new Date(result.submittedAt).toLocaleString('fr-FR', {\r\n        dateStyle: 'short',\r\n        timeStyle: 'short'\r\n      })\r\n    : \"Date non disponible\"}\r\n</p>\r\n\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n                  );\r\n                })}\r\n              </div>\r\n            )}\r\n          </section>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentDashboard;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}