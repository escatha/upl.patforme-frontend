{"ast":null,"code":"import React,{useState}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import{Input}from\"../components/ui/input\";import{Label}from\"../components/ui/label\";import{Button}from\"../components/ui/button\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PlanifierExamen=()=>{var _location$state;const location=useLocation();const navigate=useNavigate();const questionnaire=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.questionnaire;const[examForm,setExamForm]=useState({title:\"\",subject:\"\",duration:60,startTime:\"\",endTime:\"\"});const handleSubmit=async()=>{try{const response=await fetch(\"http://localhost:3001/api/exams/schedule\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${localStorage.getItem(\"token\")}`},body:JSON.stringify({...examForm,questionnaireId:questionnaire.id})});if(!response.ok){throw new Error(\"Erreur lors de la planification\");}// ✅ Revenir à AdminDashboard après la planification\nnavigate(\"/admin\");}catch(error){console.error(\"❌ Planification échouée :\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 max-w-xl mx-auto space-y-4 bg-white rounded-xl shadow-lg mt-10\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold\",children:\"Planifier un examen\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Questionnaire : \",questionnaire===null||questionnaire===void 0?void 0:questionnaire.title]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{children:\"Titre\"}),/*#__PURE__*/_jsx(Input,{value:examForm.title,onChange:e=>setExamForm({...examForm,title:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{children:\"Mati\\xE8re\"}),/*#__PURE__*/_jsx(Input,{value:examForm.subject,onChange:e=>setExamForm({...examForm,subject:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{children:\"Dur\\xE9e (minutes)\"}),/*#__PURE__*/_jsx(Input,{type:\"number\",value:examForm.duration,onChange:e=>setExamForm({...examForm,duration:parseInt(e.target.value)})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{children:\"Heure de d\\xE9but\"}),/*#__PURE__*/_jsx(Input,{type:\"datetime-local\",value:examForm.startTime,onChange:e=>setExamForm({...examForm,startTime:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{children:\"Heure de fin\"}),/*#__PURE__*/_jsx(Input,{type:\"datetime-local\",value:examForm.endTime,onChange:e=>setExamForm({...examForm,endTime:e.target.value})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mt-4\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",onClick:()=>navigate(\"/admin\"),children:\"Annuler\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,children:\"Planifier\"})]})]});};export default PlanifierExamen;","map":{"version":3,"names":["React","useState","useLocation","useNavigate","Input","Label","Button","jsx","_jsx","jsxs","_jsxs","PlanifierExamen","_location$state","location","navigate","questionnaire","state","examForm","setExamForm","title","subject","duration","startTime","endTime","handleSubmit","response","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","questionnaireId","id","ok","Error","error","console","className","children","value","onChange","e","target","type","parseInt","variant","onClick"],"sources":["C:/Users/HP/Desktop/upl.patforme/frontend/src/pages/PlanifierExamen.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { Input } from \"../components/ui/input\";\r\nimport { Label } from \"../components/ui/label\";\r\nimport { Button } from \"../components/ui/button\";\r\n\r\nconst PlanifierExamen = () => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const questionnaire = location.state?.questionnaire;\r\n\r\n  const [examForm, setExamForm] = useState({\r\n    title: \"\",\r\n    subject: \"\",\r\n    duration: 60,\r\n    startTime: \"\",\r\n    endTime: \"\",\r\n  });\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      const response = await fetch(\"http://localhost:3001/api/exams/schedule\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n        },\r\n        body: JSON.stringify({\r\n          ...examForm,\r\n          questionnaireId: questionnaire.id,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Erreur lors de la planification\");\r\n      }\r\n\r\n      // ✅ Revenir à AdminDashboard après la planification\r\n      navigate(\"/admin\");\r\n    } catch (error) {\r\n      console.error(\"❌ Planification échouée :\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-xl mx-auto space-y-4 bg-white rounded-xl shadow-lg mt-10\">\r\n      <h2 className=\"text-xl font-bold\">Planifier un examen</h2>\r\n      <p className=\"text-sm text-gray-500\">Questionnaire : {questionnaire?.title}</p>\r\n\r\n      <div className=\"space-y-2\">\r\n        <div>\r\n          <Label>Titre</Label>\r\n          <Input\r\n            value={examForm.title}\r\n            onChange={(e) => setExamForm({ ...examForm, title: e.target.value })}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Label>Matière</Label>\r\n          <Input\r\n            value={examForm.subject}\r\n            onChange={(e) => setExamForm({ ...examForm, subject: e.target.value })}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Label>Durée (minutes)</Label>\r\n          <Input\r\n            type=\"number\"\r\n            value={examForm.duration}\r\n            onChange={(e) => setExamForm({ ...examForm, duration: parseInt(e.target.value) })}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Label>Heure de début</Label>\r\n          <Input\r\n            type=\"datetime-local\"\r\n            value={examForm.startTime}\r\n            onChange={(e) => setExamForm({ ...examForm, startTime: e.target.value })}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Label>Heure de fin</Label>\r\n          <Input\r\n            type=\"datetime-local\"\r\n            value={examForm.endTime}\r\n            onChange={(e) => setExamForm({ ...examForm, endTime: e.target.value })}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex justify-between mt-4\">\r\n        <Button variant=\"outline\" onClick={() => navigate(\"/admin\")}>\r\n          Annuler\r\n        </Button>\r\n        <Button onClick={handleSubmit}>Planifier</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlanifierExamen;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}